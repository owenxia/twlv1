<% @profile = current_user.profile %>
<% if @profile.nil? %>
  <% @profile = current_user.build_profile %>
  <% @profile.save %>
<% end %>


    <nav class="navbar navbar-inverse">
      <div class="container-fluid narrower-nav-top">


        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="glyphicon glyphicon-menu-hamburger" style="color:#D3D3D3; font-size:1.2em;"></span>
          </button>
          <%= link_to ("<i class='fa fa-globe fa-lg'></i></span> TravelWishLists").html_safe, root_path, class: "navbar-brand" %>
        </div>


        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="navbar-collapse-1">
          
          <ul class="nav navbar-nav">

            <li class=
              <% if controller.class == WelcomeController && controller.action_name == 'how_it_works' %>
                "active"
              <% end %>
            >
              <%= link_to 'How It Works', how_it_works_path %>
            </li>

            <li class=
              <% if controller.class == ExperiencesController && controller.action_name == 'index' %>
                "active"
              <% end %>
            >
              <%= link_to 'Travel Experiences', experiences_path %>
            </li>

            <li class=
              <% if controller.class == ProfilesController && controller.action_name == 'wish_list' %>
                "active"
              <% end %>
            >
            <%= link_to 'My Wish List', wish_list_profile_path(current_user.profile) %>
            </li>


            <li class=
              <% if controller.class == ProfilesController && controller.action_name == 'show' %>
                "active"
              <% end %>
            >
              <%= link_to 'Profile', profile_path(@profile) %>
            </li>

            <li class=
              <% if controller.class == WelcomeController && controller.action_name == 'inspirations' %>
                "active"
              <% end %>
            >
              <%= link_to 'Inspirations', travel_inspirations_path %>
            </li>

          </ul>

          <p class="navbar-text navbar-right">
            <%= link_to 'Sign Out', destroy_user_session_path, method: :delete, class: "navbar-link" %>
          </p>
          
          <% if !current_user.profile.firstname.nil? %>
            <p class="navbar-text navbar-right gray-link">Signed in as <%= link_to truncate("#{current_user.profile.firstname} #{current_user.profile.lastname}", length: 30), @profile %></p>
          <% elsif !current_user.email.nil? %>
            <p class="navbar-text navbar-right gray-link">Signed in as <%= link_to truncate(current_user.email, length: 30), @profile %></p>
          <% end %>

        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>